#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <stdlib.h>

char* Getip()
{
    static char input_ip[15];
    int i,j=0;
    printf("Type an IP address: ");
    scanf("%s",&input_ip);
    if (strlen(input_ip)<7||strlen(input_ip)>15)
        {
        printf("Error: not a valid address:\n");
        Getip();
        }
    for (i=0;i<strlen(input_ip);i++)
    {
        char c=input_ip[i];
        if (isdigit(c)!=0)
            continue;
        else if (c=='.')
        {
            j++;
            continue;
        }
        else
            {
            printf("Error: not a valid address:\n");
            Getip();
            }
    }
    if (j!=3)
    {
        printf("Error: not a valid address:\n");
        Getip();
    }
    return input_ip;
}

int main()
{
    char ip[15],ip3[12],ip2[8],ip1[4];
    int i,j=0;
    strcpy(ip,Getip());
    for (i=0;i<strlen(ip);i++)
    {
        char c=ip[i];
        if (c=='.')
        {
            j++;
            if (j==1)
                *ip3=ip[i];
            if (j==2)
                *ip2=ip[i];
            if (j==3)
                *ip1=ip[i];
        }
    }
    printf("%s\n",ip);
    printf("%d\n",strlen(ip));
    printf("%s\n",ip3);
    printf("%s\n",ip2);
    printf("%s\n",ip1);
    return 0;
}
